<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNISPHERE</title>
<style>
body{
    margin:0;
    font-family:'Segoe UI', sans-serif;
    background:#f4f6f9;
    transition: background 0.5s;
}

/* WELCOME PAGE */
#welcome{
background:linear-gradient(135deg,#006400,#00a859);
color:white;
height:100vh;
text-align:center;
padding-top:100px;
}
.logo-big{ width:140px; border-radius:50%; }
.btn{ margin-top:40px; padding:14px 35px; background:yellow; color:#006400; border:none; border-radius:30px; font-weight:bold; cursor:pointer; }

/* GENERAL PAGE */
.page{ display:none; min-height:100vh; padding-bottom:50px; transition: background 0.5s; }
.header{ padding:15px; background:#006400; color:white; text-align:center; }

/* HOME PAGE */
.home-hero{
background:linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.6)), url('https://i.ibb.co/XkkJJYjN/unnamed.jpg');
background-size:cover; background-position:center; padding:80px 20px; color:white; text-align:center;
}
.home-hero h1{ font-size:36px; }
.home-hero p{ font-size:18px; opacity:0.9; }

.home-box{
background:white; margin:-40px auto 20px auto; width:90%; max-width:900px; padding:30px; border-radius:15px; box-shadow:0 5px 20px rgba(0,0,0,0.15); text-align:center;
}

.option-btn{ padding:14px 30px; margin:10px; background:#006400; color:white; border:none; border-radius:25px; cursor:pointer; font-weight:bold; }
.card{ background:white; margin:20px auto; padding:20px; border-radius:10px; box-shadow:0 3px 10px rgba(0,0,0,0.1); max-width:350px; text-align:center; }
input, select{ padding:10px; width:85%; margin:8px 0; border-radius:5px; border:1px solid #ccc; }
label{ font-size:14px; color:#333; }
a{ color:#006400; text-decoration:none; cursor:pointer; }

/* ASPIRANT DASHBOARD */
#aspirantDashboard{
display:none;
background:linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url('https://i.ibb.co/XkkJJYjN/unnamed.jpg');
background-size:cover; background-position:center;
min-height:100vh;
color:white;
text-align:center;
padding-top:40px;
}
#aspirantDashboard .logo-big{ width:100px; margin-bottom:20px; }
.dashboard-header{
background:rgba(255,255,255,0.95);
color:#006400;
margin:0 auto 30px auto;
padding:20px;
border-radius:15px;
max-width:400px;
box-shadow:0 4px 15px rgba(0,0,0,0.2);
}
.dashboard-header h1{ margin:0; font-size:24px; }
.dashboard-header p{ margin:5px 0 0 0; font-size:16px; }

.asp-card{
background:white;
color:#006400;
padding:20px;
margin:15px auto;
border-radius:15px;
max-width:300px;
cursor:pointer;
font-weight:bold;
font-size:16px;
box-shadow:0 4px 15px rgba(0,0,0,0.2);
transition: transform 0.2s;
display:flex;
align-items:center;
justify-content:center;
}
.asp-card:hover{ transform:scale(1.05); }
.asp-card img {
display:inline-block;
vertical-align:middle;
margin-right:10px;
}
.back-btn{ background:#006400; color:white; margin-top:30px; padding:12px 25px; border:none; border-radius:20px; cursor:pointer; font-weight:bold; }

/* SCREENING PORTAL */
#screeningPortal{
display:none;
min-height:100vh;
background:linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url('https://i.ibb.co/XkkJJYjN/unnamed.jpg');
background-size:cover;
background-position:center;
text-align:center;
padding-top:30px;
color:white;
}
#screeningPortal .header{
background:rgba(255,255,255,0.95);
color:#006400;
margin:0 auto 30px auto;
padding:20px;
border-radius:15px;
max-width:400px;
box-shadow:0 4px 15px rgba(0,0,0,0.2);
}
#screeningPortal .screen-card{
background:white;
color:#006400;
padding:20px;
margin:15px auto;
border-radius:15px;
max-width:350px;
box-shadow:0 4px 15px rgba(0,0,0,0.2);
text-align:left;
}
#screeningPortal input, #screeningPortal select{
width:90%;
margin:8px 0;
padding:10px;
border-radius:5px;
border:1px solid #ccc;
}
#screeningPortal button{
margin-top:15px;
padding:12px 25px;
background:#006400;
color:white;
border:none;
border-radius:25px;
cursor:pointer;
font-weight:bold;
}
</style>
</head>
<body>
<!-- WELCOME PAGE -->
<div id="welcome">
    <img src="https://i.ibb.co/jPJ8kjmL/download.png" class="logo-big">
    <h1>UNISPHERE</h1>
    <p>Empowering Aspirants & 100L Students</p>
    <button class="btn" onclick="enterSite()">Enter</button>
</div>

<!-- HOME PAGE -->
<div id="home" class="page">
    <div class="home-hero">
        <h1>UNISPHERE Academic Portal</h1>
        <p>Your Smart Digital Campus Experience</p>
    </div>
    <div class="home-box">
        <h2>Access Your Account</h2>
        <p>Secure login for Students & Aspirants</p>
        <button class="option-btn" onclick="openLogin()">Sign In</button>
        <button class="option-btn" onclick="openSignup()">Sign Up</button>
    </div>
</div>

<!-- LOGIN PAGE -->
<div id="loginPage" class="page">
<div class="header">Student Sign In</div>
<div class="card">
  <input type="text" id="loginInput" placeholder="Username or Email"><br>
  <input type="password" id="loginPass" placeholder="Password"><br>
  <label><input type="checkbox" id="rememberMe"> Remember Me</label><br>
  <button class="option-btn" onclick="login()">Login</button>
  <p style="margin-top:10px;"><a onclick="forgotPassword()">Forgot Password?</a></p>
  <h4 id="loginResult"></h4>
</div>
<button class="option-btn" onclick="goHome()">Back</button>
</div>

<!-- SIGNUP PAGE -->
<div id="signupPage" class="page">
<div class="header">Create Account</div>
<div class="card">
  <input type="text" id="signupUsername" placeholder="Username"><br>
  <input type="email" id="signupEmail" placeholder="Email"><br>
  <input type="password" id="signupPass" placeholder="Password"><br>
  <select id="signupCategory">
    <option value="">Select Category</option>
    <option value="100L">100 Level Student</option>
    <option value="Aspirant">Aspirant</option>
  </select><br>
  <button class="option-btn" onclick="register()">Register</button>
  <h4 id="registerResult"></h4>
</div>
<button class="option-btn" onclick="goHome()">Back</button>
</div>

<!-- ASPIRANT DASHBOARD -->
<div id="aspirantDashboard">
    <div class="dashboard-header">
        <h1>Welcome, <span id="aspirantName">Aspirant</span>! üéì</h1>
        <p>Explore your UNIOSUN Admission Tools</p>
    </div>

    <div class="asp-card" onclick="openScreening()">üìù Screening Portal</div>
    <div class="asp-card" onclick="alert('Roadmap to UNIOSUN coming soon!')">üõ£Ô∏è Roadmap to UNIOSUN</div>
    <div class="asp-card" onclick="alert('Screening Calculator coming soon!')">üìä Screening Calculator</div>
    <div class="asp-card" onclick="alert('Course Cut-Offs coming soon!')">üéì Course Cut-Offs</div>
    <div class="asp-card" onclick="window.open('https://chat.whatsapp.com/', '_blank')">üí¨ WhatsApp Group</div>

    <div class="asp-card" onclick="window.open('https://efacility.jamb.gov.ng/', '_blank')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/3/37/JAMB_Logo.png" style="width:40px;">
        üìù JAMB eFacility
    </div>

    <div class="asp-card" onclick="window.open('https://www.uniosun.edu.ng/admissions', '_blank')">
        <img src="https://i.ibb.co/jPJ8kjmL/download.png" style="width:30px;">
        üéì UNIOSUN Admission Portal
    </div>

    <button class="back-btn" onclick="logout()">Back / Logout</button>
</div>

<!-- SCREENING PORTAL -->
<div id="screeningPortal">
    <div class="header">
        <img src="https://i.ibb.co/jPJ8kjmL/download.png" class="logo-big" style="width:80px;"><br>
        <h2>Screening Portal</h2>
    </div>

    <div class="screen-card">
        <label>Courses üè´</label>
        <input type="text" placeholder="Upload courses later (placeholder)" id="courses"><br>

        <label>Grades (A1-C6) üìù</label>
        <select id="grades">
            <option value="">Select Grade</option>
            <option>A1</option><option>B2</option><option>B3</option>
            <option>C4</option><option>C5</option><option>C6</option>
        </select><br>

        <label>JAMB Score üéØ</label>
        <input type="number" id="jambScore" placeholder="Minimum 160" min="160"><br>

        <label>State of Origin üåç</label>
        <select id="stateOrigin">
            <option value="Osun" selected>Osun</option>
            <option value="Lagos">Lagos</option>
            <option value="Oyo">Oyo</option>
            <option value="Other">Other</option>
        </select><br>

        <button onclick="calculateScore()">Calculate Score</button>
        <h4 id="scoreResult"></h4>
    </div>

    <button class="back-btn" onclick="closeScreening()">Back</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, setPersistence, browserLocalPersistence, browserSessionPersistence, sendPasswordResetEmail, updateProfile, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAe9H4tFxBhu7zhFyNtgpXuKjK4BSgwF5k",
  authDomain: "my-secur-app.firebaseapp.com",
  projectId: "my-secur-app",
  storageBucket: "my-secur-app.firebasestorage.app",
  messagingSenderId: "603859706635",
  appId: "1:603859706635:web:728362577418d208f8780e",
  measurementId: "G-GTMKG31C8E"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// NAVIGATION
function hideAll(){
    document.getElementById("home").style.display="none";
    document.getElementById("loginPage").style.display="none";
    document.getElementById("signupPage").style.display="none";
    document.getElementById("aspirantDashboard").style.display="none";
    document.getElementById("screeningPortal").style.display="none";
}
window.enterSite = ()=>{ document.getElementById("welcome").style.display="none"; document.getElementById("home").style.display="block"; }
window.openLogin = ()=>{ hideAll(); document.getElementById("loginPage").style.display="block"; }
window.openSignup = ()=>{ hideAll(); document.getElementById("signupPage").style.display="block"; }
window.goHome = ()=>{ hideAll(); document.getElementById("home").style.display="block"; document.body.style.background="#f4f6f9"; }

// REGISTER
window.register = ()=>{
    const username = document.getElementById("signupUsername").value.trim();
    const email = document.getElementById("signupEmail").value.trim();
    const password = document.getElementById("signupPass").value;
    const category = document.getElementById("signupCategory").value;

    if(!username || !email || !password || !category){
        document.getElementById("registerResult").style.color="red";
        document.getElementById("registerResult").innerText="Fill all fields!";
        return;
    }
    if(password.length < 6){
        document.getElementById("registerResult").style.color="red";
        document.getElementById("registerResult").innerText="Password must be at least 6 characters!";
        return;
    }

    createUserWithEmailAndPassword(auth, email, password)
    .then((userCredential)=>{
        const user = userCredential.user;
        const info = JSON.stringify({ username, category });
        updateProfile(user, { displayName: info }).then(()=>{
            localStorage.setItem(username.toLowerCase(), JSON.stringify({ email, category }));
            document.getElementById("registerResult").style.color="green";
            document.getElementById("registerResult").innerText="Registered! ‚úÖ";
            setTimeout(()=>{
                hideAll();
                if(category==="Aspirant"){
                    document.getElementById("aspirantName").innerText = username;
                    document.getElementById("aspirantDashboard").style.display="block";
                } else {
                    alert("100L dashboard coming soon!");
                }
            },800);
        });
    })
    .catch(error=>{
        document.getElementById("registerResult").style.color="red";
        document.getElementById("registerResult").innerText=error.message;
    });
}

// LOGIN
window.login = ()=>{
    const input = document.getElementById("loginInput").value.trim();
    const password = document.getElementById("loginPass").value;
    const remember = document.getElementById("rememberMe").checked;

    if(!input || !password){
        document.getElementById("loginResult").style.color="red";
        document.getElementById("loginResult").innerText="Fill all fields!";
        return;
    }

    const persistence = remember ? browserLocalPersistence : browserSessionPersistence;
    setPersistence(auth, persistence)
    .then(()=>{
        return signInWithEmailAndPassword(auth, input, password)
        .catch(()=>{
            const saved = localStorage.getItem(input.toLowerCase());
            if(saved){
                const info = JSON.parse(saved);
                return signInWithEmailAndPassword(auth, info.email, password);
            } else {
                throw new Error("User not found or password incorrect");
            }
        });
    })
    .then((userCredential)=>{
        const user = userCredential.user;
        let info = { username:user.email.split("@")[0], category:"" };
        try{ if(user.displayName) info = JSON.parse(user.displayName); } catch(e){ }
        localStorage.setItem(info.username.toLowerCase(), JSON.stringify({ email: user.email, category: info.category }));
        hideAll();
        if(info.category === "Aspirant"){
            document.getElementById("aspirantName").innerText = info.username;
            document.getElementById("aspirantDashboard").style.display="block";
        } else {
            alert("100L dashboard coming soon!");
        }
    })
    .catch(error=>{
        document.getElementById("loginResult").style.color="red";
        document.getElementById("loginResult").innerText=error.message;
    });
}

// FORGOT PASSWORD
window.forgotPassword = ()=>{
    const input = document.getElementById("loginInput").value.trim();
    if(!input){ alert("Enter username or email!"); return; }

    sendPasswordResetEmail(auth, input)
    .then(()=>{ alert(`Password reset link sent to ${input}`); })
    .catch(()=>{
        const saved = localStorage.getItem(input.toLowerCase());
        if(saved){
            const info = JSON.parse(saved);
            sendPasswordResetEmail(auth, info.email).then(()=>{ alert(`Password reset link sent to ${info.email}`); })
            .catch(error=>{ alert("Error: "+error.message); });
        }else{
            alert("User not found!");
        }
    });
}

// LOGOUT
window.logout = ()=>{ signOut(auth).then(()=>{ hideAll(); goHome(); }); }

// AUTO LOGIN
onAuthStateChanged(auth,(user)=>{
    if(user){
        let info = { username:user.email.split("@")[0], category:"" };
        try{ if(user.displayName) info = JSON.parse(user.displayName); } catch(e){ }
        localStorage.setItem(info.username.toLowerCase(), JSON.stringify({ email: user.email, category: info.category }));
        hideAll();
           if(info.category === "Aspirant"){
            document.getElementById("aspirantName").innerText = info.username;
            document.getElementById("aspirantDashboard").style.display="block";
        } else {
            alert("100L dashboard coming soon!");
        }
    }
});

// SCREENING PORTAL NAVIGATION
window.openScreening = ()=>{
    hideAll();
    document.getElementById("screeningPortal").style.display="block";
}

window.closeScreening = ()=>{
    hideAll();
    document.getElementById("aspirantDashboard").style.display="block";
}

// CALCULATE SCORE
window.calculateScore = ()=>{
    const courses = document.getElementById("courses").value.trim();
    const grade = document.getElementById("grades").value;
    const jamb = parseInt(document.getElementById("jambScore").value);
    const state = document.getElementById("stateOrigin").value;

    if(!courses || !grade || !jamb || !state){
        document.getElementById("scoreResult").style.color="red";
        document.getElementById("scoreResult").innerText="Fill all fields!";
        return;
    }

    if(jamb < 160){
        document.getElementById("scoreResult").style.color="red";
        document.getElementById("scoreResult").innerText="JAMB score must be at least 160!";
        return;
    }

    // Placeholder scoring logic (update later with your own formula)
    let score = 0;
    const gradeScores = {A1:6, B2:5, B3:4, C4:3, C5:2, C6:1};
    score += gradeScores[grade] || 0;
    score += (jamb - 160)/10; // scaled contribution from JAMB
    if(state === "Osun") score += 2; // bonus for state

    document.getElementById("scoreResult").style.color="green";
    document.getElementById("scoreResult").innerText=`Calculated Score: ${score.toFixed(2)}`;
}
</script>
</body>
</html>
